when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"python3","install_id":"python3","systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"],"version":"1"}],"name":"python3"}]}'
then:
  status: 200
  header:
  - name: date
    value: Fri, 25 Jul 2025 14:43:38 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '1276'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: ORS0DiAuoAMEb3g=
  body: '{"items":[{"name":"python3","page":null,"candidate_pages":null,"messages":[{"level":"error","type":"constraints_too_tight","message":"Resolution constraints are too tight.","context":{}},{"level":"trace","type":"resolution_logic","message":"TRACE (GROUP): Group ''python3'' could not be resolved with strategy: Stage 1: Only allow missing builds for packages without current locked derivations.","context":{"install_id":"GROUP","message":"Group ''python3'' could not be resolved with strategy: Stage 1: Only allow missing builds for packages without current locked derivations."}},{"level":"trace","type":"resolution_logic","message":"TRACE (GROUP): Group ''python3'' could not be resolved with strategy: Stage 2: Unlock existing derivations but require known builds.","context":{"install_id":"GROUP","message":"Group ''python3'' could not be resolved with strategy: Stage 2: Unlock existing derivations but require known builds."}},{"level":"trace","type":"resolution_logic","message":"TRACE (GROUP): Group ''python3'' could not be resolved with strategy: Stage 3: Unlock existing derivations and allow missing builds.","context":{"install_id":"GROUP","message":"Group ''python3'' could not be resolved with strategy: Stage 3: Unlock existing derivations and allow missing builds."}}]}]}'
---
when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"python3","install_id":"python3","systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"]}],"name":"python3"}]}'
then:
  status: 200
  header:
  - name: date
    value: Fri, 25 Jul 2025 14:43:39 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3628'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: ORS0OhRwoAMEVJQ=
  body: '{"items":[{"name":"python3","page":{"page":833752,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/danprwy8gn33fdcbw1g7abm20m49f3d4-python3-3.13.5.drv","name":"python3-3.13.5","pname":"python3","version":"3.13.5","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/riv3i1wrig5kaf89wgpx46581f71gfqb-python3-3.13.5"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=fc02ee70efb805d3b2865908a13ddd4474557ecf","rev":"fc02ee70efb805d3b2865908a13ddd4474557ecf","rev_count":833752,"rev_date":"2025-07-23T06:00:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-25T00:29:13.402547Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/6ylkkj02kqpsl5b1g7c7lgdywpblx4s1-python3-3.13.5.drv","name":"python3-3.13.5","pname":"python3","version":"3.13.5","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/chgczp3c2zsr14bxkx9vfwsywajbgbgg-python3-3.13.5"},{"name":"debug","store_path":"/nix/store/z90g6ca112y3jgdjqalpznrnlg8i9cab-python3-3.13.5-debug"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=fc02ee70efb805d3b2865908a13ddd4474557ecf","rev":"fc02ee70efb805d3b2865908a13ddd4474557ecf","rev_count":833752,"rev_date":"2025-07-23T06:00:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-25T00:52:42.365691Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/fnl5d18ndak58bwl4d4m0zdak6pgfwsf-python3-3.13.5.drv","name":"python3-3.13.5","pname":"python3","version":"3.13.5","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/zvsvpabmbi49sczlbhn7908g1c1qphdg-python3-3.13.5"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=fc02ee70efb805d3b2865908a13ddd4474557ecf","rev":"fc02ee70efb805d3b2865908a13ddd4474557ecf","rev_count":833752,"rev_date":"2025-07-23T06:00:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-25T01:11:48.623037Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/i1zsn6jkc1fpcd13kva4mr90gh3vmkrc-python3-3.13.5.drv","name":"python3-3.13.5","pname":"python3","version":"3.13.5","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/djck7mx6jad1w0yy6zings96dyxanls6-python3-3.13.5"},{"name":"debug","store_path":"/nix/store/wv1jq7hs7iy0jk28bvqd3dhyp5hbrvlb-python3-3.13.5-debug"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=fc02ee70efb805d3b2865908a13ddd4474557ecf","rev":"fc02ee70efb805d3b2865908a13ddd4474557ecf","rev_count":833752,"rev_date":"2025-07-23T06:00:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-25T01:36:56.058130Z","cache_uri":null,"install_id":"python3"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
---
when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"poetry","install_id":"poetry","systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"]}],"name":"poetry"}]}'
then:
  status: 200
  header:
  - name: date
    value: Fri, 25 Jul 2025 14:43:41 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3877'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: ORS0bjaBoAMEV_A=
  body: '{"items":[{"name":"poetry","page":{"page":833752,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/hh7xwdmh2jmaid1lywfwwx99bsl57mgp-python3.13-poetry-2.1.3.drv","name":"poetry-2.1.3","pname":"poetry","version":"2.1.3","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/j9rcwm1asi28dqvky073zbs091ir23g8-python3.13-poetry-2.1.3"},{"name":"dist","store_path":"/nix/store/mdkvgr23ng37c6bgbpnxwhbq138ns2g8-python3.13-poetry-2.1.3-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=fc02ee70efb805d3b2865908a13ddd4474557ecf","rev":"fc02ee70efb805d3b2865908a13ddd4474557ecf","rev_count":833752,"rev_date":"2025-07-23T06:00:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-25T00:29:12.660955Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/0ydsypxcyl1cj0ljy6xlkahvai6gyv00-python3.13-poetry-2.1.3.drv","name":"poetry-2.1.3","pname":"poetry","version":"2.1.3","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/djkvbgm4x8dxicmdin3lifvlxpnvlmn7-python3.13-poetry-2.1.3"},{"name":"dist","store_path":"/nix/store/c8siygc9s572lpz1ys7wv20bkzi1rnqb-python3.13-poetry-2.1.3-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=fc02ee70efb805d3b2865908a13ddd4474557ecf","rev":"fc02ee70efb805d3b2865908a13ddd4474557ecf","rev_count":833752,"rev_date":"2025-07-23T06:00:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-25T00:52:41.041293Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/9j040ry4mspzgzw6n3xjym5gl783fjq7-python3.13-poetry-2.1.3.drv","name":"poetry-2.1.3","pname":"poetry","version":"2.1.3","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/8nkc20fm430pildgc2iqnh2jsrz8nfxx-python3.13-poetry-2.1.3"},{"name":"dist","store_path":"/nix/store/ksjyrx51y1gf0spzciqkfbl707fi80fs-python3.13-poetry-2.1.3-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=fc02ee70efb805d3b2865908a13ddd4474557ecf","rev":"fc02ee70efb805d3b2865908a13ddd4474557ecf","rev_count":833752,"rev_date":"2025-07-23T06:00:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-25T01:11:47.880716Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/sm81ypfhks0z0fiyi55k35qxa3jdvrqh-python3.13-poetry-2.1.3.drv","name":"poetry-2.1.3","pname":"poetry","version":"2.1.3","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/f20v6y7pndsvj6bqpck98kbr3ajj0wjc-python3.13-poetry-2.1.3"},{"name":"dist","store_path":"/nix/store/52rdwhvvxg0gav6d6hl64mmip5lqrh5d-python3.13-poetry-2.1.3-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=fc02ee70efb805d3b2865908a13ddd4474557ecf","rev":"fc02ee70efb805d3b2865908a13ddd4474557ecf","rev_count":833752,"rev_date":"2025-07-23T06:00:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-25T01:36:54.623894Z","cache_uri":null,"install_id":"poetry"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
