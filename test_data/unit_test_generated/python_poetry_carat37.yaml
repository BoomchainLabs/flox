when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"python3","install_id":"python3","systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"],"version":"^3.7"}],"name":"python3"}]}'
then:
  status: 200
  header:
  - name: date
    value: Fri, 20 Jun 2025 11:38:05 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3646'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: Mdg0njtJoAMEY7Q=
  body: '{"items":[{"name":"python3","page":{"page":816272,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/b3gcarlbbnfv6walgjbcf21ay5n609p1-python3-3.12.10.drv","name":"python3-3.12.10","pname":"python3","version":"3.12.10","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/v0vy1c59f0vf71h64caw17hzymvg0zms-python3-3.12.10"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev":"9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev_count":816272,"rev_date":"2025-06-17T04:31:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-18T00:36:24.954481Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/255a922py8f7cs97nwazx68jiz2zl0r8-python3-3.12.10.drv","name":"python3-3.12.10","pname":"python3","version":"3.12.10","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/rpf3admp58i0lwmsbv0y3dg7l7qqj4a9-python3-3.12.10"},{"name":"debug","store_path":"/nix/store/p61ablwahkxdx97pwlz29b04zpncgmvg-python3-3.12.10-debug"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev":"9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev_count":816272,"rev_date":"2025-06-17T04:31:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-18T00:55:10.781687Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/6bz0xjfswjawj6anvyw9mbk8fh8rd6sw-python3-3.12.10.drv","name":"python3-3.12.10","pname":"python3","version":"3.12.10","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/g13l84j8gn1fdhl3pzkg2r9ip9jz1hhd-python3-3.12.10"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev":"9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev_count":816272,"rev_date":"2025-06-17T04:31:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-18T01:12:32.471151Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/h95xflanqqarxi1j9wxmmvsh62yz8nv1-python3-3.12.10.drv","name":"python3-3.12.10","pname":"python3","version":"3.12.10","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/8w718rm43x7z73xhw9d6vh8s4snrq67h-python3-3.12.10"},{"name":"debug","store_path":"/nix/store/fi03x2bn49bmm3h53snkdmkypilnd5n2-python3-3.12.10-debug"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev":"9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev_count":816272,"rev_date":"2025-06-17T04:31:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-18T01:32:53.612669Z","cache_uri":null,"install_id":"python3"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
---
when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"poetry","install_id":"poetry","systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"]}],"name":"poetry"}]}'
then:
  status: 200
  header:
  - name: date
    value: Fri, 20 Jun 2025 11:38:10 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3877'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: Mdg0riLhoAMEMwA=
  body: '{"items":[{"name":"poetry","page":{"page":816272,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/hzx27rjqi7hfsplx11iy58l7rchz08gy-python3.12-poetry-2.1.3.drv","name":"poetry-2.1.3","pname":"poetry","version":"2.1.3","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/rkb40pnqcyqsxaim4jq229xa56swn57y-python3.12-poetry-2.1.3"},{"name":"dist","store_path":"/nix/store/5p8avcxv7g8ni3py8nhfk9qskgm72cvn-python3.12-poetry-2.1.3-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev":"9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev_count":816272,"rev_date":"2025-06-17T04:31:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-18T00:36:24.290084Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/cxh26pvbg3znzkjkb439xzgbn3aqsazp-python3.12-poetry-2.1.3.drv","name":"poetry-2.1.3","pname":"poetry","version":"2.1.3","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/nyiix96w7ilyszpz3p3c74fadd9llb26-python3.12-poetry-2.1.3"},{"name":"dist","store_path":"/nix/store/rzhafvf9ihcjcsn3m1w83b31lbxbnmf2-python3.12-poetry-2.1.3-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev":"9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev_count":816272,"rev_date":"2025-06-17T04:31:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-18T00:55:09.512201Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/lcnxgl66pq406c38yfi249hyvai39xk4-python3.12-poetry-2.1.3.drv","name":"poetry-2.1.3","pname":"poetry","version":"2.1.3","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/y725d1i8853yghqswx0q37xfmhwapr93-python3.12-poetry-2.1.3"},{"name":"dist","store_path":"/nix/store/x4ffv8chhgzmjd2i3cnaffplmprw32aw-python3.12-poetry-2.1.3-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev":"9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev_count":816272,"rev_date":"2025-06-17T04:31:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-18T01:12:31.786410Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/xjx7vpci8ikcgn2j2277jpv2s212zjg0-python3.12-poetry-2.1.3.drv","name":"poetry-2.1.3","pname":"poetry","version":"2.1.3","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/z37lngfsd8y99bc989bllv1ykrb60mh2-python3.12-poetry-2.1.3"},{"name":"dist","store_path":"/nix/store/93v7rwvsm7m9g5qk6gxsafpvhj3hlcxq-python3.12-poetry-2.1.3-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev":"9e83b64f727c88a7711a2c463a7b16eedb69a84c","rev_count":816272,"rev_date":"2025-06-17T04:31:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-18T01:32:52.220453Z","cache_uri":null,"install_id":"poetry"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
