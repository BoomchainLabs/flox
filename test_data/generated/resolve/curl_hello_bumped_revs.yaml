when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
    - name: date
      value: Mon, 20 Oct 2025 14:41:00 GMT
    - name: content-type
      value: application/json
    - name: server
      value: uvicorn
    - name: apigw-requestid
      value: SwB_bhm-IAMEMHA=
  body: '{"items":[{"name":"toplevel","page":{"page":870280,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/8zcxk32a006n7xqgypp55y3qgc184qbq-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"aarch64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/daqkbhfb98im7w73lk61irbydq1lpq2n-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/3l3cdqp6bk47m43s87k0qaivvj9r10kp-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/fkqg97zhj3hi5x0dl9llyg2x333sg8b9-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/32i2wvq3scw9dwck2gzkwqs5fncg1b8r-curl-8.14.1"},{"name":"devdoc","store_path":"/nix/store/z05aliw0hig4id56mygpisrmwrhswd0j-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev":"7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev_count":870280,"rev_date":"2025-10-02T04:57:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-10-03T04:40:08.901118Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/8dri24lbcbasjwhg9nsg6l05cx7gzv5f-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"aarch64-linux","outputs":[{"name":"bin","store_path":"/nix/store/l93sz0xmd0pm4xjyz9bhlyfgh09bzsxn-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/33q1v0ji5zg5jp2znpmkzl4f48a06p4i-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/cym6k6y7zbifdqa0lwkk02drb3yk0s4f-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/spnfxfzjm38ni9fj25zgcj4i1xxzgq7q-curl-8.14.1"},{"name":"debug","store_path":"/nix/store/vraq79imsxdv0f39m9v2z3g5fa75i9x7-curl-8.14.1-debug"},{"name":"devdoc","store_path":"/nix/store/vnd6zyyhgh04n6zvzcnlf7zxm3mpz6nq-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev":"7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev_count":870280,"rev_date":"2025-10-02T04:57:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-10-03T04:56:38.562301Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/jx55502ma6l9s19395zqk85qs9260xxx-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"x86_64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/ashjvarapkgzyb38b6m3zpynfmz1n0xd-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/g72d0ls7iwb4lqa2gm930rx8a5272fy7-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/3l9g8nqlhf3cbdaja215qs5rh5y08qdj-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/87q480903wqmqwzyd385cw09bikhkax9-curl-8.14.1"},{"name":"devdoc","store_path":"/nix/store/1gqad1nz2cvh92psygzn175vpxyg0rdv-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev":"7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev_count":870280,"rev_date":"2025-10-02T04:57:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-10-03T05:12:15.563620Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/b922zrv2m4i4z0833qv57xwgn7c1w12g-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"x86_64-linux","outputs":[{"name":"bin","store_path":"/nix/store/8ggin0y50drxqzlkci4p71v2nan6gc7s-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/awayiin721c5khfrn2vqx1cnb6rjswg0-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/1w1ywxmz7mfcgpb7gxw95mgffrd8nj6f-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/g3vj4z918zal30klpdd9papkavis01sh-curl-8.14.1"},{"name":"debug","store_path":"/nix/store/l2d22g8knzk23dx1xs780an5hn9w4z4v-curl-8.14.1-debug"},{"name":"devdoc","store_path":"/nix/store/ng1844h0cz649lqv8w1cq0iagwkl39jw-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev":"7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev_count":870280,"rev_date":"2025-10-02T04:57:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-10-03T05:27:32.029959Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/551sfblw8glv3lk5qscsm3kdpg8d32jh-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/ci364cgbwbpww272shfz5mj3y019r9fd-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev":"7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev_count":870280,"rev_date":"2025-10-02T04:57:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-10-03T04:40:22.600059Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/3qjcyjfsn2vbrvjy4pp90ca069bmz396-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/srcdq2gbiwyqv68cfm26mkmcdhniw7ki-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev":"7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev_count":870280,"rev_date":"2025-10-02T04:57:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-10-03T04:56:55.726723Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/1rb8cz3695jpw04bw8iznq2jx3ggpxj6-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/w08n9sfw5lylvwxd3ic3h9gvgfrr5mpc-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev":"7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev_count":870280,"rev_date":"2025-10-02T04:57:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-10-03T05:12:29.351716Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/x80j8hd76ca0yx7d8k4qn8fpqgbraqav-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/b1ayn0ln6n8bm2spz441csqc2ss66az3-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev":"7df7ff7d8e00218376575f0acdcc5d66deadbeef","rev_count":870280,"rev_date":"2025-10-02T04:57:58Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-10-03T05:27:50.319609Z","cache_uri":null,"install_id":"hello"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
