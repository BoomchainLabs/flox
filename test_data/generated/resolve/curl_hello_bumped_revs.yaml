when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
    - name: date
      value: Wed, 28 May 2025 00:50:50 GMT
    - name: content-type
      value: application/json
    - name: server
      value: uvicorn
    - name: apigw-requestid
      value: LQOcsib7IAMEVsg=
  body: '{"items":[{"name":"toplevel","page":{"page":803629,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/zjp415han5j834fks9f5fmhrvq870xha-curl-8.13.0.drv","name":"curl-8.13.0","pname":"curl","version":"8.13.0","system":"aarch64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/j9l00pb7vjqichx1pb9wh44mmpmsy5i8-curl-8.13.0-bin"},{"name":"dev","store_path":"/nix/store/hh6z6aagackr90b8148gmnzjch5x56h7-curl-8.13.0-dev"},{"name":"man","store_path":"/nix/store/vjypp34nlg9v1q278yswlg8v85mr6cd1-curl-8.13.0-man"},{"name":"out","store_path":"/nix/store/dw53si81ax5jkn23vpncsiizxzx8bz9b-curl-8.13.0"},{"name":"devdoc","store_path":"/nix/store/5mvbv3mqr8bi1rn3fjninmrgdrkm4hjy-curl-8.13.0-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev":"2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev_count":803629,"rev_date":"2025-05-20T12:29:04Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-24T04:22:05.822088Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/rsqr33vdwd718lcarnhzzwcfam8jsila-curl-8.13.0.drv","name":"curl-8.13.0","pname":"curl","version":"8.13.0","system":"aarch64-linux","outputs":[{"name":"bin","store_path":"/nix/store/q8i9ywjn4pkjk5sfx26jg35870dfnp3i-curl-8.13.0-bin"},{"name":"dev","store_path":"/nix/store/n5zr628wakfhlz9nav97vcf32iixz7dc-curl-8.13.0-dev"},{"name":"man","store_path":"/nix/store/83g8mdy735nf01d77nc2pxgzwz977dpf-curl-8.13.0-man"},{"name":"out","store_path":"/nix/store/dxgrykw0d6rzxkilf8pl4rp308311xjs-curl-8.13.0"},{"name":"debug","store_path":"/nix/store/8s9qjwxfb6d70b81q0rjalyfhlr0npzv-curl-8.13.0-debug"},{"name":"devdoc","store_path":"/nix/store/bcn8dajl5d8fc589z8n5a8h7x7bzxgrp-curl-8.13.0-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev":"2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev_count":803629,"rev_date":"2025-05-20T12:29:04Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-24T04:40:29.403405Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/sxypmg8386p2limng186jx0f0bjzh8m4-curl-8.13.0.drv","name":"curl-8.13.0","pname":"curl","version":"8.13.0","system":"x86_64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/q5w08sli5mf1awlxsiicywvz2j6j2y8l-curl-8.13.0-bin"},{"name":"dev","store_path":"/nix/store/nkqcwv2k6s47bbdms95fpmghlr3qmxbf-curl-8.13.0-dev"},{"name":"man","store_path":"/nix/store/mngfjkv5qsz7s1hwkcda7yhsbwgf125x-curl-8.13.0-man"},{"name":"out","store_path":"/nix/store/xl9ibq6wmh3xx5z55svf2hzpzlj766x1-curl-8.13.0"},{"name":"devdoc","store_path":"/nix/store/zi91mkzh78gzc5fs98i7xni6dmcvn036-curl-8.13.0-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev":"2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev_count":803629,"rev_date":"2025-05-20T12:29:04Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-24T04:56:39.940944Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/xyl1i1gn0v2y73bwnwqgbiziwjscqdj4-curl-8.13.0.drv","name":"curl-8.13.0","pname":"curl","version":"8.13.0","system":"x86_64-linux","outputs":[{"name":"bin","store_path":"/nix/store/s2np0ri22gq9pq0fnv3yqjsbsbmw16xi-curl-8.13.0-bin"},{"name":"dev","store_path":"/nix/store/nmxr110602fvajr9ax8d65ac1g40vx1a-curl-8.13.0-dev"},{"name":"man","store_path":"/nix/store/innps8d9bl9jikd3nsq8bd5irgrlay6f-curl-8.13.0-man"},{"name":"out","store_path":"/nix/store/v578vkzh0qhzczjvrzf64lqb2c74d5pk-curl-8.13.0"},{"name":"debug","store_path":"/nix/store/k756k2jr9j6rda6dzy6qh5m261q0pv3z-curl-8.13.0-debug"},{"name":"devdoc","store_path":"/nix/store/q736b72lp0j9qazprci468c5b8fn0xgr-curl-8.13.0-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev":"2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev_count":803629,"rev_date":"2025-05-20T12:29:04Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-24T05:16:08.019941Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/cg3sfpzw3md7y6j9rk2b36m7f6pvhgsi-hello-2.12.1.drv","name":"hello-2.12.1","pname":"hello","version":"2.12.1","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/zq74har4ak9dxi7z5k7id9v6sgm2kb8w-hello-2.12.1"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev":"2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev_count":803629,"rev_date":"2025-05-20T12:29:04Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-24T04:22:06.575854Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/y85nq5lpxhih9cigmgagc7582djifv9v-hello-2.12.1.drv","name":"hello-2.12.1","pname":"hello","version":"2.12.1","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/vj14177glyvd6ymwrlpfgsg8b94hijbf-hello-2.12.1"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev":"2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev_count":803629,"rev_date":"2025-05-20T12:29:04Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-24T04:40:30.920098Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/r9whaws1xgp9l73x7nj5xbg60id3swh0-hello-2.12.1.drv","name":"hello-2.12.1","pname":"hello","version":"2.12.1","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/nw6yj6pal7vjjvih0mpqpcqjc7ksh4h1-hello-2.12.1"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev":"2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev_count":803629,"rev_date":"2025-05-20T12:29:04Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-24T04:56:40.684056Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/vmn4z8cvaxdxa5i56lbl82gqzddh4jik-hello-2.12.1.drv","name":"hello-2.12.1","pname":"hello","version":"2.12.1","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/lz9gfg6iybsh0hiignpk55w99a3bj4vb-hello-2.12.1"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev":"2795c506fe8fb7b03c36ccb51f75b6dfdeadbeef","rev_count":803629,"rev_date":"2025-05-20T12:29:04Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-24T05:16:09.753917Z","cache_uri":null,"install_id":"hello"}],"messages":[],"complete":true},"messages":[]}]}'
