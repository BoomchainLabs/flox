when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello-unfree","install_id":"hello-unfree","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello-unfree","install_id":"hello-unfree","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello-unfree","install_id":"hello-unfree","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello-unfree","install_id":"hello-unfree","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
  - name: date
    value: Mon, 20 Oct 2025 14:39:37 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3663'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: SwByejt5oAMESOg=
  body: '{"items":[{"name":"toplevel","page":{"page":878042,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"hello-unfree","pkg_path":"hello-unfree","derivation":"/nix/store/aj8hv75rc01aq9v5211503a61gmbgznz-example-unfree-package-1.0.drv","name":"example-unfree-package-1.0","pname":"hello-unfree","version":"1.0","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/gdmdxh5ifjsai1x0wy70v8bqhrsw2wz5-example-unfree-package-1.0"}],"outputs_to_install":["out"],"description":"Example package with unfree license (for testing)","license":"Unfree","locked_url":"https://github.com/flox/nixpkgs?rev=544961dfcce86422ba200ed9a0b00dd4b1486ec5","rev":"544961dfcce86422ba200ed9a0b00dd4b1486ec5","rev_count":878042,"rev_date":"2025-10-15T10:27:37Z","broken":false,"insecure":false,"unfree":true,"missing_builds":true,"stabilities":["staging","unstable"],"scrape_date":"2025-10-17T03:45:20.107119Z","cache_uri":null,"install_id":"hello-unfree"},{"catalog":"nixpkgs","attr_path":"hello-unfree","pkg_path":"hello-unfree","derivation":"/nix/store/mdgf74mfavsbsafml58vwph43kxv96i4-example-unfree-package-1.0.drv","name":"example-unfree-package-1.0","pname":"hello-unfree","version":"1.0","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/2iq6dwwnmbdx5hdwgzl29y3y50y20z4q-example-unfree-package-1.0"}],"outputs_to_install":["out"],"description":"Example package with unfree license (for testing)","license":"Unfree","locked_url":"https://github.com/flox/nixpkgs?rev=544961dfcce86422ba200ed9a0b00dd4b1486ec5","rev":"544961dfcce86422ba200ed9a0b00dd4b1486ec5","rev_count":878042,"rev_date":"2025-10-15T10:27:37Z","broken":false,"insecure":false,"unfree":true,"missing_builds":true,"stabilities":["staging","unstable"],"scrape_date":"2025-10-17T04:19:12.262155Z","cache_uri":null,"install_id":"hello-unfree"},{"catalog":"nixpkgs","attr_path":"hello-unfree","pkg_path":"hello-unfree","derivation":"/nix/store/gczkh7m6bl99blcdnngjbrak89aqgarr-example-unfree-package-1.0.drv","name":"example-unfree-package-1.0","pname":"hello-unfree","version":"1.0","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/zj4biprvqhpjq42mwks3hr9ja4n213r3-example-unfree-package-1.0"}],"outputs_to_install":["out"],"description":"Example package with unfree license (for testing)","license":"Unfree","locked_url":"https://github.com/flox/nixpkgs?rev=544961dfcce86422ba200ed9a0b00dd4b1486ec5","rev":"544961dfcce86422ba200ed9a0b00dd4b1486ec5","rev_count":878042,"rev_date":"2025-10-15T10:27:37Z","broken":false,"insecure":false,"unfree":true,"missing_builds":true,"stabilities":["staging","unstable"],"scrape_date":"2025-10-17T04:52:00.142583Z","cache_uri":null,"install_id":"hello-unfree"},{"catalog":"nixpkgs","attr_path":"hello-unfree","pkg_path":"hello-unfree","derivation":"/nix/store/mcw69yhmb35wji99d11gs7ck66nacs7b-example-unfree-package-1.0.drv","name":"example-unfree-package-1.0","pname":"hello-unfree","version":"1.0","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/vh6g0f8xi128hwb0k23qj1i71q3a0s5s-example-unfree-package-1.0"}],"outputs_to_install":["out"],"description":"Example package with unfree license (for testing)","license":"Unfree","locked_url":"https://github.com/flox/nixpkgs?rev=544961dfcce86422ba200ed9a0b00dd4b1486ec5","rev":"544961dfcce86422ba200ed9a0b00dd4b1486ec5","rev_count":878042,"rev_date":"2025-10-15T10:27:37Z","broken":false,"insecure":false,"unfree":true,"missing_builds":true,"stabilities":["staging","unstable"],"scrape_date":"2025-10-17T05:27:33.298557Z","cache_uri":null,"install_id":"hello-unfree"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
