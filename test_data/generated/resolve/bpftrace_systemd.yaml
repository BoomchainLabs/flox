when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"bpftrace","install_id":"bpftrace","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"bpftrace","install_id":"bpftrace","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"bpftrace","install_id":"bpftrace","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"bpftrace","install_id":"bpftrace","systems":["x86_64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"systemd","install_id":"systemd","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"systemd","install_id":"systemd","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"systemd","install_id":"systemd","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"systemd","install_id":"systemd","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
  - name: date
    value: Wed, 28 May 2025 00:50:22 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '681'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: LQOYRiWOIAMEMaA=
  body: '{"items":[{"name":"toplevel","page":null,"messages":[{"level":"error","type":"attr_path_not_found.not_found_for_all_systems","message":"The attr_path bpftrace is not found for all the requested systems, suggest limiting systems to (aarch64-linux,x86_64-linux).","context":{"attr_path":"bpftrace","install_id":"bpftrace","valid_systems":"aarch64-linux,x86_64-linux"}},{"level":"error","type":"attr_path_not_found.not_found_for_all_systems","message":"The attr_path systemd is not found for all the requested systems, suggest limiting systems to (aarch64-linux,x86_64-linux).","context":{"attr_path":"systemd","install_id":"systemd","valid_systems":"aarch64-linux,x86_64-linux"}}]}]}'
---
when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"bpftrace","install_id":"bpftrace","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"bpftrace","install_id":"bpftrace","systems":["x86_64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"systemd","install_id":"systemd","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"systemd","install_id":"systemd","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
  - name: date
    value: Wed, 28 May 2025 00:50:23 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '4354'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: LQOYXg9TIAMEMfw=
  body: '{"items":[{"name":"toplevel","page":{"page":804993,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"bpftrace","pkg_path":"bpftrace","derivation":"/nix/store/g0yjkawl7a8xjr1fqbsbwwb5c6fzndm5-bpftrace-0.23.2.drv","name":"bpftrace-0.23.2","pname":"bpftrace","version":"0.23.2","system":"aarch64-linux","outputs":[{"name":"man","store_path":"/nix/store/3srqk6d7sy057ha7ix69707491xnri30-bpftrace-0.23.2-man"},{"name":"out","store_path":"/nix/store/616hi2nmd1g5wb5wspy413l0d52ad472-bpftrace-0.23.2"}],"outputs_to_install":["man","out"],"description":"High-level tracing language for Linux eBPF","license":"Apache-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=063f43f2dbdef86376cc29ad646c45c46e93234c","rev":"063f43f2dbdef86376cc29ad646c45c46e93234c","rev_count":804993,"rev_date":"2025-05-23T18:48:26Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-26T04:40:49.657375Z","cache_uri":null,"install_id":"bpftrace"},{"catalog":"nixpkgs","attr_path":"bpftrace","pkg_path":"bpftrace","derivation":"/nix/store/d0g20vwz7xisdp6hc8mp80abismig626-bpftrace-0.23.2.drv","name":"bpftrace-0.23.2","pname":"bpftrace","version":"0.23.2","system":"x86_64-linux","outputs":[{"name":"man","store_path":"/nix/store/jpy7g0ps7dbkbrp16vh2i9gv8cnb1p9h-bpftrace-0.23.2-man"},{"name":"out","store_path":"/nix/store/rp0n4q9m59k4c35844hj8cy491dkgqx6-bpftrace-0.23.2"}],"outputs_to_install":["man","out"],"description":"High-level tracing language for Linux eBPF","license":"Apache-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=063f43f2dbdef86376cc29ad646c45c46e93234c","rev":"063f43f2dbdef86376cc29ad646c45c46e93234c","rev_count":804993,"rev_date":"2025-05-23T18:48:26Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-26T05:16:51.324845Z","cache_uri":null,"install_id":"bpftrace"},{"catalog":"nixpkgs","attr_path":"systemd","pkg_path":"systemd","derivation":"/nix/store/aa25pqs9bvq2kras4nxibch4zkprrjbb-systemd-257.5.drv","name":"systemd-257.5","pname":"systemd","version":"257.5","system":"aarch64-linux","outputs":[{"name":"dev","store_path":"/nix/store/6jcj3xbcp057lni8s8j9k99607yac1kw-systemd-257.5-dev"},{"name":"man","store_path":"/nix/store/8mxniy3m3ljrykydqfvahk2pyyk6dix5-systemd-257.5-man"},{"name":"out","store_path":"/nix/store/3rp3z9c3clhcq432cgas4apm4abansfh-systemd-257.5"},{"name":"debug","store_path":"/nix/store/6hbpxbfvxnvjskr2ak1farswvzq9j9zj-systemd-257.5-debug"}],"outputs_to_install":["man","out"],"description":"System and service manager for Linux","license":"[ BSD-2-Clause, BSD-3-Clause, CC0-1.0, LGPL-2.1-or-later, LGPL-2.0-or-later, MIT, MIT-0, OFL-1.1, Public Domain ]","locked_url":"https://github.com/flox/nixpkgs?rev=063f43f2dbdef86376cc29ad646c45c46e93234c","rev":"063f43f2dbdef86376cc29ad646c45c46e93234c","rev_count":804993,"rev_date":"2025-05-23T18:48:26Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-26T04:41:58.939051Z","cache_uri":null,"install_id":"systemd"},{"catalog":"nixpkgs","attr_path":"systemd","pkg_path":"systemd","derivation":"/nix/store/cld2p7qjdx9vm7ib4lwpmrww0mdssig6-systemd-257.5.drv","name":"systemd-257.5","pname":"systemd","version":"257.5","system":"x86_64-linux","outputs":[{"name":"dev","store_path":"/nix/store/2vixc3z7hl2c1liq1624lrkw2lkc3hgm-systemd-257.5-dev"},{"name":"man","store_path":"/nix/store/0iyxf2pmg0i16d4kxarqdfd3nqfa9mc5-systemd-257.5-man"},{"name":"out","store_path":"/nix/store/if9z6wmzmb07j63c02mvfkhn1mw1w5p4-systemd-257.5"},{"name":"debug","store_path":"/nix/store/yhqi2aisvgxf9q95h27jb43yjsq6dsll-systemd-257.5-debug"}],"outputs_to_install":["man","out"],"description":"System and service manager for Linux","license":"[ BSD-2-Clause, BSD-3-Clause, CC0-1.0, LGPL-2.1-or-later, LGPL-2.0-or-later, MIT, MIT-0, OFL-1.1, Public Domain ]","locked_url":"https://github.com/flox/nixpkgs?rev=063f43f2dbdef86376cc29ad646c45c46e93234c","rev":"063f43f2dbdef86376cc29ad646c45c46e93234c","rev_count":804993,"rev_date":"2025-05-23T18:48:26Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-26T05:18:06.189102Z","cache_uri":null,"install_id":"systemd"}],"messages":[],"complete":true},"messages":[]}]}'
